# Redis Custom Configuration
# Bu dosya opsiyonel - docker-compose.yml'deki command parametreleri önceliklidir

# Network
bind 0.0.0.0
protected-mode yes
port 6379
tcp-backlog 511
timeout 300
tcp-keepalive 60

# General
daemonize no
supervised no
loglevel notice

# Snapshotting (RDB)
save 900 1      # 900 saniyede 1 değişiklik varsa kaydet
save 300 10     # 300 saniyede 10 değişiklik varsa kaydet
save 60 10000   # 60 saniyede 10000 değişiklik varsa kaydet
stop-writes-on-bgsave-error yes
rdbcompression yes
rdbchecksum yes
dbfilename dump.rdb
dir /data

# Replication
replica-serve-stale-data yes
replica-read-only yes

# Limits
maxclients 10000

# Append Only File (AOF) - daha güvenli ama yavaş
# docker-compose.yml'de --appendonly yes ile aktif
appendfilename "appendonly.aof"
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Slow log
slowlog-log-slower-than 10000
slowlog-max-len 128

# Latency monitor
latency-monitor-threshold 100

# Performance
lazyfree-lazy-eviction no
lazyfree-lazy-expire no
lazyfree-lazy-server-del no
replica-lazy-flush no
